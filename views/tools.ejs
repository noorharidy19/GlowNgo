<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/StyleProd.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title>Tools</title>
    <script src="js/Prod.js"></script>
</head>
<%- include('partials/nav') %>
<section class="Tools">
    <select class="sortt" id="sortSelect" onchange="x(this.value, 'products')">
        <option>Select</option>
        <option>A-Z</option>
        <option>Z-A</option>
        <option>By price(LOWER->HIGHER)</option>
        <option>By price(HIGHER->LOWER)</option>
    </select>
      <div class="products">
        <div class="products">
            <select id="currencySelector" onchange="convertCurrency()">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="EGP">EGP</option>
            </select>
        <% products.forEach(product => { %>
            <div class="AllProducts">
                <div class="container">
                    <img src="../images/<%= product.Image %>" alt="Makeup img" width="318" height="300" class="imggel">
                    <h2 class="eye"><%= product.name %></h2>
                    <h3 class="eye"><%= product.price %> $</h3>
                    <h4 class="<%= product.stockStatus === 'In Stock' ? 'in-stock' : 'out-of-stock' %>"><%= product.stockStatus %></h4>
                    <div class="middle">
                        <div class="text" onclick="showPopup('<%= product._id %>')"><i class="fa-solid fa-cart-shopping" title="Add To Cart"></i></div>
                        <div id="overlay" style="display: none;"></div>
                        <div class="text" onclick="showPopup('<%= product._id %>')"><i class="fa-sharp fa-solid fa-eye" title="View more"></i></div>
                        <div class="text" onclick=""><i class="fa-solid fa-heart" title="Add To Whishlist"></i></div>
                    </div>
                </div>
            </div>
            <% }); %>
        </div>

        <% products.forEach(product => { %>
            <div class="Products-window" id="popup-<%= product._id %>">
                <h2 class="p1" style="margin-left: 240px;">Product Shade</h2>
                <div class="popup">
                    <span class="close-btn" onclick="hidePopup('<%= product._id %>')">&times;</span>
                    <div class="image-container">
                        <div class="images-inline">
                            <!-- <img src="../images/<%= product.Image %>" alt="Makeup img" width="320" height="300" class="hide1"> -->
                            <img src="../images/<%= product.Shade %>" alt="Makeup img" width="320" height="300" class="hide1">
                        </div>
                        <h2 class="p1"><%= product.name %></h2>
                        <h3 class="p1"><%= product.price %> $</h3>
                        <h4 class="<%= product.stockStatus === 'In Stock' ? 'in-stock' : 'out-of-stock' %>"><%= product.stockStatus %>(<%= product.quantity %> available)</h4>
                    </div>
                </div>
            </div>
            <% }); %>
    </section>


<style>
.in-stock {
color: green;
text-align: center;
}
.images-inline {
        display: flex;
        gap: 10px;
    }


.out-of-stock {
color: red;
text-align: center;
}
</style>
<div class="popup-container" id="popupContainerSignIn">
 
    <div class="popup">
        <span class="close-btn" onclick="hidePopupsignin('popupContainerSignIn')">&times;</span>
        <h2>Log in</h2>
        <form action="/login" method="post" id="loginForm">
<input type="text" id="username" placeholder="Username" class="textt" name="username">
<span id="usernameErr" style="color: red;"></span>
<input type="password" id="password" placeholder="Password" class="textt" name="password">
<span id="passwordErr" style="color: red;"></span>
<!-- <i class="fa-solid fa-eye fa-fade fa-sm" onclick="Show()"></i> -->
<button type="submit" class="b" onclick="validateForm2()">Login</button>
<br>    
<div class="forget"> <a href="#" onclick="hidePopupsignin('popupContainerSignIn'); showPopupSignin('popupContainerForget')">Forgot Password</a></div>
<br>
        </form>

        <br>
        
        <div class="create-account">
            Don't have an account? <a href="#" onclick="hidePopupsignin('popupContainerSignIn'); showPopupSignin('popupContainerSignUp')">Create an account</a>
        </div>
        
    </div>
</div>

<div class="popup-container" id="popupContainerSignUp">
<div class="popup">
    <span class="close-btn" onclick="hidePopupsignin('popupContainerSignUp')">&times;</span>
    <h2>Sign Up</h2>
    <!-- <% if (typeof errorMessage !== 'undefined' && errorMessage) { %>
        <div class="error-message <%= errorMessageClass %>"><%= errorMessage %></div>
    <% } %> -->
    <form method="post" action="/signup">
        <input type="text" id="name" name="username" placeholder="Name" class="textt">
        <span id="nameErr" style="color: red;"></span>
        <input type="email" id="email" name="email" placeholder="Email" class="textt">
        <span id="emailErr" style="color: red;"></span>
        <input type="password" id="pass" name="password" placeholder="Password" class="textt">
        <span id="passwordErr" style="color: red;"></span>
        <input type="password" id="confirm_pass" name="confirmPassword" placeholder="Confirm Password" class="textt">
        <span id="confirm_passwordErr" style="color: red;"></span>
        <input type="text" id="country" name="address" placeholder="Address" class="textt">
        <span id="countryErr" style="color: red;"></span>
        <input type="tel" id="phone" name="phoneNumber" placeholder="Phone Number" class="textt">
        <span id="phoneErr" style="color: red;"></span>
        <br>
        <button type="submit" onclick = "SignupValidation()">Sign Up</button>
        <div id="successMessage" style="display: none; color: green;">Account created successfully!</div>
        <br>
    </form>
    <br>
    
    <div class="signin">
        Already Have an account <a href="#" onclick="hidePopupsignin('popupContainerSignUp'); showPopupSignin('popupContainerSignIn')">Log in</a>
    </div>
</div>
</div>
<script>
    const exchangeRates = {
    USD: 1,
    EUR: 0.94,
    EGP:47.72
    
};

function convertCurrency() {
    const selectedCurrency = document.getElementById('currencySelector').value;
    const rate = exchangeRates[selectedCurrency];
    document.querySelectorAll('.eye').forEach((element, index) => {
        if (index % 2 !== 0) { // Assuming every second '.eye' class is a price
            const originalPrice = element.getAttribute('data-original-price');
            const convertedPrice = originalPrice * rate;
            element.textContent = `${convertedPrice.toFixed(2)} ${selectedCurrency}`;
        }
    });
}

// Initialize each product's price with a 'data-original-price' attribute for conversion
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.eye').forEach((element, index) => {
        if (index % 2 !== 0) { // Assuming every second '.eye' class is a price
            const price = parseFloat(element.textContent);
            element.setAttribute('data-original-price', price);
        }
    });
});
 function showPopup(id) {
        document.getElementById('popup-' + id).style.display = 'block';
    }

    function hidePopup(id) {
        document.getElementById('popup-' + id).style.display = 'none';
    }

    function showDescription(id) {
        document.getElementById('description-' + id).style.display = 'block';
        document.getElementById('usage-' + id).style.display = 'none';
    }

    function showUsage(id) {
        document.getElementById('usage-' + id).style.display = 'block';
        document.getElementById('description-' + id).style.display = 'none';
    }

    function showShade(imageId) {
        document.getElementById(imageId).style.display = 'block';
    }
    function showDescription(id) {
var darkMode = localStorage.getItem('darkMode') === 'true';
var descriptionElement = document.getElementById('description-' + id);
var usageElement = document.getElementById('usage-' + id);
var btn1Element = document.getElementById('b1-' + id);
var btn2Element = document.getElementById('b2-' + id);

descriptionElement.style.display = "inline-block";
usageElement.style.display = "none";
btn1Element.style.backgroundColor = darkMode ? "darkgray" : "pink";
btn2Element.style.backgroundColor = darkMode ? "whitesmoke" : "whitesmoke";
}

function showUsage(id) {
var darkMode = localStorage.getItem('darkMode') === 'true';
var descriptionElement = document.getElementById('description-' + id);
var usageElement = document.getElementById('usage-' + id);
var btn1Element = document.getElementById('b1-' + id);
var btn2Element = document.getElementById('b2-' + id);

usageElement.style.display = "inline-block";
descriptionElement.style.display = "none";
btn2Element.style.backgroundColor = darkMode ? "darkgray" : "pink";
btn1Element.style.backgroundColor = darkMode ? "whitesmoke" : "whitesmoke";
}


</script>
</html>